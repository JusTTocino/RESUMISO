<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Resumidor Inteligente</title>

  <!-- Favicon básico SVG: libro -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22 fill=%22%234f46e5%22><path d=%22M4 4h16v2H4zm0 6h16v2H4zm0 6h10v2H4z%22/></svg>" type="image/svg+xml" />

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');

    * { box-sizing: border-box; }
    body {
      margin: 0;
      background: #f5f7fa;
      font-family: 'Inter', sans-serif;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      align-items: center;
      padding: 2rem 1rem;
      color: #222;
    }
    header {
      max-width: 720px;
      width: 100%;
      margin-bottom: 2rem;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }
    .titulo-selector {
      display: flex;
      align-items: center;
      gap: 12px;
      justify-content: center;
    }
    .titulo-selector svg {
      width: 32px;
      height: 32px;
      fill: #4f46e5;
    }
    header h1 {
      font-weight: 600;
      font-size: 2.4rem;
      margin: 0;
      color: #1f2937;
    }
    select#selectIdioma {
      cursor: pointer;
      border: 1.5px solid #d1d5db;
      background: white;
      color: #1f2937;
      padding: 0.4rem 0.8rem;
      border-radius: 10px;
      font-weight: 600;
      font-size: 1rem;
    }
    header p {
      color: #4b5563;
      font-size: 1.1rem;
      margin: 0;
    }
    .certificado {
      display: flex;
      align-items: center;
      gap: 8px;
      color: #10b981;
      font-weight: 600;
      font-size: 1rem;
    }
    .certificado svg {
      width: 24px;
      height: 24px;
      fill: #10b981;
    }
    main {
      max-width: 720px;
      width: 100%;
      background: white;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(31, 41, 55, 0.1);
      padding: 2rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    textarea {
      width: 100%;
      height: 200px;
      border-radius: 10px;
      border: 1.5px solid #d1d5db;
      padding: 1rem;
      font-size: 1rem;
      resize: vertical;
      font-family: 'Inter', sans-serif;
    }
    #resultado {
      background: #eef2ff;
      padding: 1.5rem;
      border-radius: 10px;
      font-size: 1.1rem;
      line-height: 1.6;
      min-height: 120px;
      white-space: pre-wrap;
      color: #1e293b;
      user-select: text;
    }
    button {
      border: none;
      border-radius: 10px;
      padding: 1rem;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    #resumir { background-color: #6366f1; color: white; }
    #resumir:hover { background-color: #4f46e5; }
    #borrar { background-color: #ef4444; color: white; }
    #borrar:hover { background-color: #b91c1c; }
    .slider-container {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    input[type="range"] {
      width: 100%;
      height: 12px;
      border-radius: 10px;
      background: #d1d5db;
      cursor: pointer;
    }
    input[type="range"]::-webkit-slider-thumb {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: #6366f1;
      border: 2px solid #4f46e5;
      margin-top: -6px;
    }
    @media (max-width: 600px) {
      textarea { height: 150px; }
      .titulo-selector { flex-direction: column; }
    }
  </style>
</head>
<body>

  <header>
    <div class="titulo-selector" role="banner">
      <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 4h16v2H4zm0 6h16v2H4zm0 6h10v2H4z"/></svg>
      <h1 id="titulo">Resumidor Inteligente</h1>
      <select id="selectIdioma" aria-label="Idioma de la interfaz" title="Seleccionar idioma">
        <option value="es">Español</option>
        <option value="en">English</option>
        <option value="fr">Français</option>
        <option value="de">Deutsch</option>
        <option value="it">Italiano</option>
        <option value="pt">Português</option>
        <option value="ru">Русский</option>
        <option value="zh">中文</option>
        <option value="ja">日本語</option>
        <option value="ko">한국어</option>
        <option value="ar">العربية</option>
        <option value="hi">हिन्दी</option>
        <option value="tr">Türkçe</option>
        <option value="pl">Polski</option>
        <option value="nl">Nederlands</option>
        <option value="sv">Svenska</option>
        <option value="fi">Suomi</option>
        <option value="no">Norsk</option>
        <option value="el">Ελληνικά</option>
      </select>
    </div>
    <p id="descripcion">Pega tu texto y obtén un resumen claro y rápido</p>
    <div class="certificado" title="Certificado por ChatGPT">
      <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 3.875 3.35 7.125 7 7.125S19 12.875 19 9a7 7 0 0 0-7-7Zm-1.25 10.5-2.5-2.5 1.06-1.06 1.44 1.44 3.94-3.94 1.06 1.06-5 5Z"/></svg>
      <span id="certificado-texto">Certificado por ChatGPT — Resumen confiable y eficiente</span>
    </div>
  </header>

  <main>
    <textarea id="inputTexto" placeholder="Pega aquí el texto que deseas resumir..." aria-label="Texto para resumir"></textarea>

    <div class="slider-container">
      <label for="nivelResumen" id="labelNivelResumen">Nivel de resumen: <span id="valorResumen">5</span></label>
      <input type="range" id="nivelResumen" min="1" max="10" value="5" aria-valuemin="1" aria-valuemax="10" aria-valuenow="5" aria-label="Nivel de resumen" />
    </div>

    <button id="resumir" onclick="resumirTexto()">Resumir Texto</button>
    <button id="borrar" onclick="borrarTexto()">Borrar Todo</button>

    <div id="resultado" aria-live="polite" aria-label="Resumen generado"></div>
  </main>

  <script>
    const selectIdioma = document.getElementById("selectIdioma");
    const inputTexto = document.getElementById("inputTexto");
    const resultado = document.getElementById("resultado");
    const slider = document.getElementById("nivelResumen");
    const valorResumen = document.getElementById("valorResumen");
    const titulo = document.getElementById("titulo");
    const descripcion = document.getElementById("descripcion");
    const certificadoTexto = document.getElementById("certificado-texto");
    const botonResumir = document.getElementById("resumir");
    const botonBorrar = document.getElementById("borrar");

    const textos = {
      es: { titulo: "Resumidor Inteligente", descripcion: "Pega tu texto y obtén un resumen claro y rápido", certificado: "Certificado por ChatGPT — Resumen confiable y eficiente", placeholder: "Pega aquí el texto que deseas resumir...", boton: "Resumir Texto", botonBorrar: "Borrar Todo", mensajeVacio: "Por favor, ingresa un texto para resumir." },
      en: { titulo: "Smart Summarizer", descripcion: "Paste your text and get a clear, quick summary", certificado: "Certified by ChatGPT — Reliable and efficient summary", placeholder: "Paste here the text you want to summarize...", boton: "Summarize Text", botonBorrar: "Clear All", mensajeVacio: "Please enter text to summarize." },
      fr: { titulo: "Résumé Intelligent", descripcion: "Collez votre texte et obtenez un résumé clair et rapide", certificado: "Certifié par ChatGPT — Résumé fiable et efficace", placeholder: "Collez ici le texte que vous souhaitez résumer...", boton: "Résumer le texte", botonBorrar: "Tout Effacer", mensajeVacio: "Veuillez entrer un texte à résumer." },
      de: { titulo: "Intelligenter Zusammenfasser", descripcion: "Fügen Sie Ihren Text ein und erhalten Sie eine Zusammenfassung", certificado: "Zertifiziert von ChatGPT", placeholder: "Fügen Sie den Text ein...", boton: "Text zusammenfassen", botonBorrar: "Alles löschen", mensajeVacio: "Bitte Text eingeben." },
      it: { titulo: "Riassuntore Intelligente", descripcion: "Incolla il testo e ottieni un riassunto", certificado: "Certificato da ChatGPT", placeholder: "Incolla qui il testo...", boton: "Riassumi il testo", botonBorrar: "Cancella tutto", mensajeVacio: "Inserisci un testo da riassumere." },
      pt: { titulo: "Resumidor Inteligente", descripcion: "Cole seu texto e obtenha um resumo", certificado: "Certificado pelo ChatGPT", placeholder: "Cole aqui o texto...", boton: "Resumir Texto", botonBorrar: "Limpar Tudo", mensajeVacio: "Por favor, insira um texto." },
      ru: { titulo: "Умный Резюмер", descripcion: "Вставьте текст и получите резюме", certificado: "Сертифицировано ChatGPT", placeholder: "Вставьте текст...", boton: "Резюмировать текст", botonBorrar: "Очистить всё", mensajeVacio: "Введите текст." },
      zh: { titulo: "智能摘要器", descripcion: "粘贴文本并获取摘要", certificado: "ChatGPT认证", placeholder: "粘贴文本...", boton: "摘要文本", botonBorrar: "清除", mensajeVacio: "请输入文本。" },
      ja: { titulo: "スマート要約", descripcion: "テキストを貼り付けて要約", certificado: "ChatGPT認定", placeholder: "テキストを貼り付け...", boton: "テキストを要約", botonBorrar: "すべてクリア", mensajeVacio: "テキストを入力してください。" },
      ko: { titulo: "스마트 요약기", descripcion: "텍스트를 붙여넣어 요약", certificado: "ChatGPT 인증", placeholder: "텍스트를 붙여넣기...", boton: "요약하기", botonBorrar: "모두 지우기", mensajeVacio: "텍스트를 입력하세요." },
      ar: { titulo: "الملخص الذكي", descripcion: "الصق النص واحصل على ملخص", certificado: "معتمد من ChatGPT", placeholder: "الصق النص...", boton: "تلخيص النص", botonBorrar: "مسح الكل", mensajeVacio: "يرجى إدخال نص." },
      hi: { titulo: "स्मार्ट सारांशक", descripcion: "पाठ चिपकाएं और सारांश प्राप्त करें", certificado: "ChatGPT प्रमाणित", placeholder: "यहाँ पाठ चिपकाएं...", boton: "सारांश करें", botonBorrar: "सब साफ़ करें", mensajeVacio: "कृपया पाठ दर्ज करें।" },
      tr: { titulo: "Akıllı Özetleyici", descripcion: "Metni yapıştırın ve özet alın", certificado: "ChatGPT Sertifikalı", placeholder: "Metni yapıştır...", boton: "Özetle", botonBorrar: "Hepsini Temizle", mensajeVacio: "Metin giriniz." },
      pl: { titulo: "Inteligentny Streszczacz", descripcion: "Wklej tekst i uzyskaj streszczenie", certificado: "Certyfikowany przez ChatGPT", placeholder: "Wklej tekst...", boton: "Streszcz", botonBorrar: "Wyczyść wszystko", mensajeVacio: "Wprowadź tekst." },
      nl: { titulo: "Slimme Samenvatter", descripcion: "Plak tekst om samen te vatten", certificado: "Gecertificeerd door ChatGPT", placeholder: "Plak tekst...", boton: "Samenvatten", botonBorrar: "Wissen", mensajeVacio: "Voer tekst in." },
      sv: { titulo: "Smart Sammanfattare", descripcion: "Klistra in text för sammanfattning", certificado: "Certifierad av ChatGPT", placeholder: "Klistra in text...", boton: "Sammanfatta", botonBorrar: "Rensa", mensajeVacio: "Ange text." },
      fi: { titulo: "Älykäs Tiivistäjä", descripcion: "Liitä teksti ja saat tiivistelmän", certificado: "ChatGPT-sertifioitu", placeholder: "Liitä teksti...", boton: "Tiivistä", botonBorrar: "Tyhjennä", mensajeVacio: "Anna teksti." },
      no: { titulo: "Smart Sammendrag", descripcion: "Lim inn tekst for sammendrag", certificado: "Sertifisert av ChatGPT", placeholder: "Lim inn tekst...", boton: "Oppsummer", botonBorrar: "Tøm alt", mensajeVacio: "Skriv inn tekst." },
      el: { titulo: "Έξυπνη Περίληψη", descripcion: "Επικολλήστε κείμενο", certificado: "Πιστοποιημένο από ChatGPT", placeholder: "Επικόλληση εδώ...", boton: "Περίληψη", botonBorrar: "Διαγραφή", mensajeVacio: "Εισάγετε κείμενο." }
    };

    // Stopwords español para filtro (puedes añadir más para otros idiomas si quieres)
    const stopwords_es = new Set([
      "de","la","que","el","en","y","a","los","del","se","las","por","un","para",
      "con","no","una","su","al","lo","como","más","pero","sus","le","ya","o","este",
      "sí","porque","esta","entre","cuando","muy","sin","sobre","también","me","hasta",
      "hay","donde","quien","desde","todo","nos","durante","todos","uno","les","ni",
      "contra","otros","ese","eso","ante","ellos","e","esto","mí","antes","algunos",
      "qué","unos","yo","otro","otras","otra","él","tanto","esa","estos","mucho",
      "quienes","nada","muchos","cual","poco","ella","estar","estas","algunas",
      "algo","nosotros","mi","mis","tú","te","ti","tu","tus","ellas","nosotras",
      "vosotros","vosotras","os","mío","mía","míos","mías","tuyo","tuya","tuyos",
      "tuyas","suyo","suya","suyos","suyas","nuestro","nuestra","nuestros","nuestras",
      "vuestro","vuestra","vuestros","vuestras","esos","esas","estoy","estás","está",
      "estamos","estáis","están","esté","estés","estemos","estéis","estén","estaré",
      "estarás","estará","estaremos","estaréis","estarán","estaría","estarías","estaríamos",
      "estaríais","estarían","estaba","estabas","estábamos","estabais","estaban","estuve",
      "estuviste","estuvo","estuvimos","estuvisteis","estuvieron","estuviera","estuvieras",
      "estuviéramos","estuvierais","estuvieran","estuviese","estuvieses","estuviésemos",
      "estuvieseis","estuviesen","estando","estado","estada","estados","estadas","estad"
    ]);

    // Actualiza textos UI al cambiar idioma
    function actualizarTextoUI() {
      const idioma = selectIdioma.value;
      const t = textos[idioma] || textos.es;
      titulo.textContent = t.titulo;
      descripcion.textContent = t.descripcion;
      certificadoTexto.textContent = t.certificado;
      inputTexto.placeholder = t.placeholder;
      botonResumir.textContent = t.boton;
      botonBorrar.textContent = t.botonBorrar;
      valorResumen.textContent = slider.value;
      resultado.textContent = "";
    }

    selectIdioma.addEventListener("change", () => {
      actualizarTextoUI();
      inputTexto.value = "";
      resultado.textContent = "";
    });

    slider.addEventListener("input", () => {
      valorResumen.textContent = slider.value;
      if(inputTexto.value.trim() !== "") {
        resumirTexto(); // Resumen instantáneo al cambiar nivel
      }
    });

    // Limpia texto, quita signos y pone minúsculas
    function limpiarTexto(texto) {
      return texto.toLowerCase().replace(/[\W_]+/g, " ").trim();
    }

    // Tokeniza oraciones simples con regex
    function obtenerOraciones(texto) {
      // Separa por . ! ? y también saltos de línea
      return texto.match(/[^.!?\n]+[.!?\n]?/g) || [];
    }

    // Algoritmo avanzado para resumen:
    // 1. Cuenta frecuencia de palabras (sin stopwords)
    // 2. Puntúa oraciones por suma de frecuencias
    // 3. Ordena y selecciona las mejores según nivel de resumen
    function resumir(texto, nivel) {
      if (!texto) return "";

      const oraciones = obtenerOraciones(texto);

      // Frecuencia de palabras
      const freq = {};
      const stopwords = stopwords_es; // Aquí solo español, pero podrías adaptar según idioma

      // Prepara palabras
      const palabras = limpiarTexto(texto).split(/\s+/).filter(w => w && !stopwords.has(w));

      palabras.forEach(p => {
        freq[p] = (freq[p] || 0) + 1;
      });

      // Puntúa oraciones
      const oracionesPuntuadas = oraciones.map(oracion => {
        const palabrasOracion = limpiarTexto(oracion).split(/\s+/);
        let puntuacion = 0;
        palabrasOracion.forEach(pal => {
          if (freq[pal]) puntuacion += freq[pal];
        });
        return { oracion: oracion.trim(), puntuacion };
      });

      // Orden descendente por puntuación
      oracionesPuntuadas.sort((a,b) => b.puntuacion - a.puntuacion);

      // Cantidad oraciones a mostrar según nivel de resumen (nivel 1: más corto, nivel 10: más largo)
      // Tomamos entre 10% y 90% del total de oraciones
      const maxOraciones = oraciones.length;
      let cantidad = Math.round(maxOraciones * (nivel / 10) * 0.8 + maxOraciones * 0.1); 
      if (cantidad < 1) cantidad = 1;
      if (cantidad > maxOraciones) cantidad = maxOraciones;

      // Selecciona las mejores oraciones
      const seleccionadas = oracionesPuntuadas.slice(0, cantidad);

      // Para mantener el orden original en el texto, ordenamos por índice original
      const ordenOriginal = oraciones.map(o => o.trim());
      seleccionadas.sort((a,b) => {
        return ordenOriginal.indexOf(a.oracion) - ordenOriginal.indexOf(b.oracion);
      });

      // Une para el resumen final
      return seleccionadas.map(o => o.oracion).join(' ');
    }

    function resumirTexto() {
      const texto = inputTexto.value.trim();
      const idioma = selectIdioma.value;
      const t = textos[idioma] || textos.es;

      if (!texto) {
        resultado.textContent = t.mensajeVacio;
        return;
      }
      const nivel = parseInt(slider.value, 10);
      const resumen = resumir(texto, nivel);
      resultado.textContent = resumen;
    }

    function borrarTexto() {
      inputTexto.value = "";
      resultado.textContent = "";
      valorResumen.textContent = slider.value;
      inputTexto.focus();
    }

    // Iniciar textos UI
    actualizarTextoUI();
  </script>

</body>
</html>
